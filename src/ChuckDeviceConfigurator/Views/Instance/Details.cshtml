@using ChuckDeviceConfigurator.ViewModels;
@model InstanceDetailsViewModel
@{
    ViewData["Title"] = "Instance Details " + Model?.Name;
}

<h1>Instance Details</h1>

<p>@Html.ValidationMessage("Instance", new { @class = "text-danger" })</p>

<div>
    <h4>Instance '@(Model?.Name)'</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Name)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Name)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Type)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Type)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Status)
        </dt>
        <dd class = "col-sm-10">
            @Html.Raw(Model?.Status)
        </dd>
        <dt class = "col-sm-2">
            Level Requirements
        </dt>
        <dd class = "col-sm-10">
            @($"{Model?.MinimumLevel}-{Model?.MaximumLevel}")
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Geofences)
        </dt>
        <dd class = "col-sm-10">
            @Html.Raw(string.Join("<br>", Model?.Geofences ?? new()))
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Data.AccountGroup)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Data.AccountGroup)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Data.IsEvent)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Data.IsEvent)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Devices)
        </dt>
        <dd class = "col-sm-10">
            @*@Html.Raw(string.Join("<br>", Model?.Devices ?? new()))*@
            @Html.Raw(string.Join("<br>", Model?.Devices.Select(device => $"{device.OnlineStatus} {device.Uuid}").ToList() ?? new()))
        </dd>
    </dl>
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model?.Name" class="btn btn-primary">Edit</a> |
    <a asp-action="Index">Back to List</a>
</div>